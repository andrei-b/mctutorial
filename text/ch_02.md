# Chapter 2: Bootloader and UART
A bootloader is a special program that runs when the system is powered on. On general-purpose computers, the bootloader's main role is to prepare the hardware and load the operating system. On microcontrollers that do not run an OS, the bootloader is often used to initialize system parameters and make the main program more independent from specific hardware details of the MCU. Standard Arduino boards also include a bootloader, which allows users to upload sketches via a standard serial interface, eliminating the need for external programmers. After the bootloader on a microcontroller finishes its specific task, it passes control to the main program. In most cases, you don't need to worry about the bootloader. However, writing our own bootloader can be useful for some of the projects we'll tackle later in this tutorial, so we'll include a simple example here.

The Arduino Uno uses a variant of the Optiboot bootloader. It is a small  program (~512 bytes), residing at the top of flash, at addresses 0x7800â€“0x7FFF (and 0x7FFF is the highest memory address for Arduino Uno). 
When you power on or reset your Arduino Uno, the bootloader starts and waits for about one second. During this time, the Arduino IDE can send the ```STK_GET_SYNC``` message via UART (the Arduino board and the IDE communicate using a subset of the STK500v1 protocol). If the bootloader receives this message, it responds with ```STK_INSYNC``` followed by ```STK_OK```, and enters programming mode, allowing a new program to be uploaded. The Arduino IDE can reset the board using the DTR (Data Terminal Ready) signal from the USB-to-Serial chip. The board resets whenever the DTR line transitions from high to low. This behavior is physically built into the Arduino Uno's circuitry and cannot be changed. Regardless of the software you're running, the board will always reset when the DTR signal is pulled low. If Arduino bootloader did not get a signal from IDE, it transfers the control to the main program starting from the address 0x0000. Why is the Bootloader stored somewhere at the end of the available memory, and not at the beginning? This gives the bootloader writers more flexibility. If the new bootloader version changes its size, the starting address of the main program (and all the offsets counted from it) will not be affected.



